<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Kiara Optometry Lens Selector</title>
<meta name="viewport" content="width=device-width, initial-scale=0.8" />

<style>
:root{
  --green:#0b3d2e;
  --pale:#ffffe0;
  --off:#f8f8f5;
  --line:#d7d7cf;
  --btn-bg:#0b3d2e;
  --btn-text:#ffffe0;
  --btn-border:#ffffff;
}

.search-only{
  position:absolute;
  width:1px;
  height:1px;
  overflow:hidden;
  white-space:nowrap;
  clip:rect(0 0 0 0);
}

html,body{
  background:var(--off);
  color:var(--green);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  font-size:11px;
  margin:0;
}
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    text-align: left;

}
 
  line {
    stroke: black;
    stroke-width: 1;
  }
  .center {
    stroke: red;
    stroke-width: 2;
  }


.wrap{width:90%; max-width:700px; margin:0 auto;}
.section{
  background:var(--pale);
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
  margin:10px 0;
}

/* Lightbox overlay */
#lightboxOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  display: none; /* hidden by default */
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
table tr:first-child th:first-child {
  width: 20%;
  text-align: left;


}
/* Lightbox image */
#lightboxOverlay img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 5px;
  box-shadow: 0 0 20px #000;
  transition: transform 0.3s;
}

/* Close on hover cursor */
#lightboxOverlay:hover {
  cursor: pointer;
}
/* Container for all lens sections */
.lens-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

/* Each sectionlens box */
.sectionlens {
  background:var(--pale);
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
cursor: pointer;
  overflow: hidden;
}


/* Image styling inside sectionlens */
.sectionlens img {
  width: 100%;
  height: auto;
  display: block;
}

table tr:first-child th:first-child {
  width: 20%;
}

label{font-weight:600; margin-top:8px; display:block;}
input, textarea{
  width:100%;
  padding:6px;
  border:1px solid #c9c9c1;
  border-radius:6px;
  box-sizing:border-box;
}

textarea{min-height:40px; resize:vertical;}

button.normal{
  background:var(--btn-bg);
  color:var(--btn-text);
  border:1px solid var(--btn-border);
  padding:6px 14px;
  border-radius:7px;
  font-size:11px;
  width:150px;
  cursor:pointer;
  margin:0 20px 0 0;
}
button.small{
  background:var(--btn-bg);
  color:var(--btn-text);
  border:1px solid var(--btn-border);
  padding:6px 6px;
  border-radius:7px;
  font-size:11px;
  width:70px;
  cursor:pointer;
  margin:0 20px 0 0;
}
h2{
  text-align: center;
  margin: 10px 0;
  font-size: 18px;
  color: var(--green);
}
h6{
  font-size:5px;
  margin: 5px;
}

button:hover{filter:brightness(1.05);}
button:active{transform:translateY(1px);}

.row{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-top:8px;
}
/* force all except headings to 11px */
.section *:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6){
  font-size:11px;
}




</style>
</head>

<body>

<div style="height:200px"></div>



  <div class="wrap">

<h2>Kiara Optometry Lens Selector</h2>
<div style="height:20px"></div>



    <div class="section">
<div>
<h3>Wearer's Details</h3>
      <label>Name </label>
      <input style="width:100%"id="name" type="text">

      <label>WhatsApp Number - <i>With country code, <span style="user-select:none">e.g. 601170199170</span></i></label>
      <input style="width:100%" id="phone" type="text" style="font-size:10px" placeholder="">
</div>
      <label>Notes</label>
      <textarea id="msg"></textarea>

      <div><br>
        <button class="normal" id="greetBtn">Greetings</button>
        <button class="normal" id="sendBtn">Send WhatsApp</button>
      </div>
    </div>

<div class="section">
<h3>From Hypervision</h3>

<table>
<tr style="border:none; height:1px;">
  <td style="border:none; height:1px; padding:0;"></td>
  <td style="border:none; height:1px; padding:0;"></td>
  <td style="border:none; height:1px; padding:0;"></td>
  <td style="border:none; height:1px; padding:0;"></td>
</tr>
<tr>
  <th colspan="4">
    Summary for <span id="customerName_summary"></span>
    <span id="todayDate"></span>
  </th>
</tr>

<tr style="border:none; height:10px;">
  <td colspan="4" style="border:none; height:1px; padding:0;"></td>
</tr>

<tr><th colspan="4">Far & Near Rx</th></tr>
<tr><td colspan="4" style="border-top: 1px dotted grey"></td></tr>
<tr>
  <td class="red">Current Rx</td>
  <td colspan="3" class="red">
    R: <span id="od_origCombined" style="margin-right:100px;">0.00 / 0.00 x 0</span>
    L: <span id="os_origCombined">0.00 / 0.00 x 0</span>
  </td>
</tr>

<tr>
  <td class="red">Current Near +<span id="mirrorNearAdd"></span></td>
  <td colspan="3" class="red" >
    R: <span id="od_nearCombined" style="margin-right:100px;">0.00 / 0.00 x 0</span>
    L: <span id="os_nearCombined">0.00 / 0.00 x 0</span>
  </td>
</tr>



<tr><td colspan="4" style="border-top: 1px dotted grey"></td></tr>

<tr class="mask2">
  <td class="yellow">Vector Rx</td>
  <td colspan="3" class="yellow">
    R: <span id="od_vcCombined" style="margin-right:100px;">0.00 / 0.00 x 0</span>
    L: <span id="os_vcCombined">0.00 / 0.00 x 0</span>
  </td>
</tr>

<tr class="mask2">
  <td class="yellow">Vector Near +<span id="mirrorNearAddVector"></span></td>
  <td colspan="3" class="yellow" >
    R: <span id="od_vcNearCombined_mirror" style="margin-right:100px;">0.00 / 0.00 x 0</span>
    L: <span id="os_vcNearCombined_mirror">0.00 / 0.00 x 0</span>
  </td>
</tr>



<tr><td colspan="4" style="border-top: 1px dotted grey"></td></tr>

<tr class="mask1">
  <td class="blue">Manual Rx</td>
  <td colspan="3" class="blue">
    R: <span id="od_finalCombined" style="margin-right:100px;">OD -</span>
    L: <span id="os_finalCombined">OS -</span>
  </td>
</tr>

<tr class="mirror1 mask1">
  <td class="blue">Vectorized RE Dom</td>
  <td colspan="3" class="blue">
    R: <span id="od_vectorDisplay_mirror" style="margin-right:80px;">0.00 / 0.00 x 0</span>
    L: <span id="os_vectorDisplay_mirror">0.00 / 0.00 x 0</span>
  </td>
</tr>

<tr class="mirror2 mask1">
  <td class="blue">Vectorized LE Dom</td>
  <td colspan="3" class="blue">
    R: <span id="ODcrossedSpan_mirror" style="margin-right:80px;">0.00 / 0.00 x 0</span>
    L: <span id="OScrossedSpan_mirror">0.00 / 0.00 x 0</span>
  </td>
</tr>

<tr class="mask1">
  <td class="blue">Manual Near +<span id="mirrorNearAddFinal"></span></td>
  <td colspan="3" class="blue" >
    R: <span id="od_finalNearCombined_mirror" style="margin-right:100px;">0.00 / 0.00 × 0</span>
    L: <span id="os_finalNearCombined_mirror">0.00 / 0.00 × 0</span>
  </td>
</tr>



<tr><td colspan="4" style="border:none; height:10px;"></td></tr>

<tr class="mask4"><th colspan="4">New Fitting Details</th></tr>

<tr class="mask4">
  <td>Right</td>
  <td colspan="3">
    PD: <span id="od_PD">-</span> mm ; NOC: <span id="od_NOC">-</span> mm
  </td>
</tr>

<tr class="mask4">
  <td>Left</td>
  <td colspan="3">
    PD: <span id="os_PD">-</span> mm ; NOC: <span id="os_NOC">-</span> mm
  </td>
</tr>

</table>

</div>


<div class="section">

  <div class="prescription-row">
    <h3>What Index Is Suitable?</h3>

    <label for="sph">Sphere</label>    <input id="sph" type="text" step="0.25">
  
    <label for="cyl">Cylinder</label>
    <input id="cyl" type="text" step="0.25">



  <button style="margin-top:2%" class="normal" id="recommendBtn">Recommended Index</button>
  <span style="margin-left:1%; font-weight:bold;" id="indexResult"></span>

</div>
</div>




<div class="section">
<h3>Lens Price</h3>
<div>
<b>Index : Low - Median - High</b><br>
1.56 : RM 250 – 480 to 700 – 2,600<br>
1.61 : RM 380 – 550 to 900 – 3,150<br>
1.67 : RM 530 – 650 to 1,450 – 3,550<br>
1.74 : RM 750 – 880 to 2,100 – 4,850<br>
----------
</div><br>




<span><b>Calculator</b></span>
<input style="margin-bottom:1%" id="priceInput" type="number" placeholder="Price 1 e.g. Frame">
<input style="margin-bottom:1%" id="input2" type="number" placeholder="Price 2 e.g. Lens">
<input style="margin-bottom:1%" id="input3" type="number" placeholder="Price 3 e.g. Lens Extra">

<button class="normal" onclick="calculateStandardDiscount()">Discount</button>
<button style="display:none" class="normal" onclick="calculateNoExamDiscount()">No Eye Exam Price</button>

<button class="normal" style="background-color:maroon" id="rCodeBtn" onclick="applyRCode()">R-Code</button>


<div id="output" style="font-weight:bold; margin-top:2%"><i>Price : Awaiting..</i></div><br>

<div id="dateOutput" style="font-weight:bold;"></div><br>

<label>Search Lenses</label>
<input type="text" id="searchInput" placeholder="Search images by name or tag"><br><br>

</div>


<div class="section">
  <button class="small" id="rotateBtn">Rotate 90°</button>

  <div style="width:100%; height:600px; display:flex; justify-content:center">
    <svg style="margin-top:280px" id="ruler" width="600" height="60">
      <!-- Center red 0 line -->
      <line x1="300" y1="0" x2="300" y2="30" style="stroke:red; stroke-width:2"/>
      <text x="300" y="40" text-anchor="middle">0</text>

      <script type="application/ecmascript"><![CDATA[
      (function(){
        const SVG_NS = "http://www.w3.org/2000/svg";
        const svg = document.getElementById('ruler');
        const center = 300;                 // shifted center
        const right50 = 563.5;              // adjusted proportionally
        const pxPerMm = (right50 - center) / 50 * (100/99);  // stretched to 100mm

        function makeLine(x, y2){
          const l = document.createElementNS(SVG_NS, 'line');
          l.setAttribute('x1', x);
          l.setAttribute('y1', 0);
          l.setAttribute('x2', x);
          l.setAttribute('y2', y2);
          svg.appendChild(l);
        }

        function makeLabel(x, mm, anchor){
          const t = document.createElementNS(SVG_NS, 'text');
          t.setAttribute('x', x);
          t.setAttribute('y', 40);
          t.setAttribute('text-anchor', anchor);
          t.textContent = mm;
          svg.appendChild(t);
        }

        for (let mm = 1; mm <= 50; mm++){
          const xL = Number((center - mm * pxPerMm).toFixed(2));
          const xR = Number((center + mm * pxPerMm).toFixed(2));
          const yLen = (mm === 50) ? 30 : (mm % 10 === 0 ? 25 : (mm % 5 === 0 ? 20 : 10));

          makeLine(xL, yLen);
          if(mm % 5 === 0) makeLabel(xL, mm, mm === 50 ? 'start' : 'middle');

          makeLine(xR, yLen);
          if(mm % 5 === 0) makeLabel(xR, mm, mm === 50 ? 'end' : 'middle');
        }
      })();
      ]]></script>
  

</svg>


<script>
  const btn = document.getElementById('rotateBtn');
  const svg = document.getElementById('ruler');
  let rotated = false;

  btn.addEventListener('click', () => {
    rotated = !rotated;
    svg.style.transform = rotated ? 'rotate(90deg)' : 'rotate(0deg)';
  });
</script>

















</div>
</div>
<div class="section">
<div>
<h3>
Diameter Check!<br>Important for Plus Powers! Reading glasses! Decentration leads to headaches!</h3>
  <!-- Buttons -->
  <button class="circleBtn small" onclick="setCircleSize(312, this)">60 mm</button>
  <button class="circleBtn small" onclick="setCircleSize(338, this)">65 mm</button>
  <button class="circleBtn small" onclick="setCircleSize(364, this)">70 mm</button>
  <button class="circleBtn small" onclick="setCircleSize(390, this)">75 mm</button>
</div>

<!-- Circle container -->
<div style="margin-top:2%; padding:2%; display:flex; justify-content:center; align-items:center;">
<div id="circleContainer" style="display:flex; justify-content:center; align-items:center; border:none; width:312px; height:312px; margin-top:10px;">
  <svg id="circleSVG" width="100%" height="100%" viewBox="0 0 300 300" style="display:block;">
    <circle cx="169" cy="169" r="169" stroke="black" stroke-width="1" fill="none" />
    <line x1="190" y1="0" x2="169" y2="312" stroke="black" stroke-width="1" />
    <line x1="0" y1="169" x2="312" y2="169" stroke="black" stroke-width="1" />
  </svg>


</div>
</div>


<script>
let selectedButton = null;

function setCircleSize(size, btn) {
  if (!btn.classList.contains('circleBtn')) return;

  const padding = 20;
  const innerSize = size - padding * 2;

  const container = document.getElementById('circleContainer');
  const svg = document.getElementById('circleSVG');

  container.style.width = size + 'px';
  container.style.height = size + 'px';
  svg.setAttribute('viewBox', `0 0 ${innerSize} ${innerSize}`);

  const circle = svg.querySelector('circle');
  const lines = svg.querySelectorAll('line');
  const center = innerSize / 2;

  circle.setAttribute('cx', center);
  circle.setAttribute('cy', center);
  circle.setAttribute('r', center);

  lines[0].setAttribute('x1', center);
  lines[0].setAttribute('y1', 0);
  lines[0].setAttribute('x2', center);
  lines[0].setAttribute('y2', innerSize);

  lines[1].setAttribute('x1', 0);
  lines[1].setAttribute('y1', center);
  lines[1].setAttribute('x2', innerSize);
  lines[1].setAttribute('y2', center);

  if (selectedButton) selectedButton.style.backgroundColor = '';
  btn.style.backgroundColor = 'grey';
  selectedButton = btn;
}

document.addEventListener('DOMContentLoaded', () => {
  const firstButton = document.querySelector('.circleBtn');
  if (firstButton) setCircleSize(312, firstButton);
});
</script>



</div>

  </div>



<div class="wrap">
<div class="lens-container">

<div class="sectionlens"><h6>Single Vision 1, Standard Stock </h6>

<span class="search-only">
Blue-Light Filter
1.56 - RM 450
1.61 - RM 600
1.67 - RM 850
1.74 - RM 1,150
UV400
-
1.61 - RM 520
1.67 - RM 650
-
Blue-Light Filter
1.56 - RM 480
1.61 - RM 550
1.67 - RM 650
1.74 - RM 880
UV400
-
1.61 - RM 380
1.67 - RM 530
-
2. Rayfilter Premium - 3 days
From Taiwan, New Generation low reflection coating.
3. Asahi-Lite - 3 days
From Japan, Premium Aspheric, Thinner sides
Photochromic
-
-
-
-
Photochromic
1.56 - RM 630 (V)
-
-
-
Blue-Light Filter
1.56 - RM 330
1.61 - RM 430
1.67 - RM 630
1.74 - RM 880
UV400
1.56 - RM 250
1.61 - RM 380
1.67 - RM 530
-
1. Rayfilter Basic - 3 days
From Taiwan, mid-range value for money.
Photochromic
1.56 - RM 530
1.61 - RM 680
1.67 - RM 700
1.74 - RM 950
Blue-Light Filter
1.56 - RM 450
1.61 - RM 550
1.67 - RM 650
1.74 - RM 750
UV400
-
-
-
-
From Europe, Premium Sphere & Aspheric, Best of both combined
Photochomic
1.56 - RM 550
1.61 - RM 750 (F)
1.67 - RM 850 (F)
-
4. Aether - 3 days
</span>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/1.png" alt="Price List 1" data-tags="basic" onclick="openLightbox(this.src)">
</div>

<div class="sectionlens"><h6>Single Vision 2, Standard Stock, Custom Lens</h6>
<span class="search-only">
Blue-Light Filter
1.56 - RM 680
1.61 - RM 750
1.67 - RM 1,080
1.74 - RM 1,630
UV400
1.56 - RM 480
1.61 - RM 630
1.67 - RM 930
1.74 - RM 1,430
6. Rayfilter Custom - 7 days
From Taiwan, simple customized single vision lenses.
Photochromic
1.56 - RM 730 
1.61 - RM 980 
1.67 - RM 1,380 
1.74 - RM 1,930
Blue-Light Filter
1.56 - RM 850
1.61 - RM 1,050
1.67 - RM 1,450
-
UV400
1.56 - RM 700
1.61 - RM 900
1.67 - RM 1,300
-
Ultimate Clear Zone from side to side!
Photochomic
1.56 - RM 1,350 (F)
1.61 - RM 1,550 (F)
1.67 - RM 1,950 (F)
-
RX
7. Pentax Custom - 7 days
Blue-Light Filter
1.56 - RM 770
1.61 - RM 920
1.67 - RM 1,120
1.74 - RM 1,770
UV400
1.56 - RM 710
1.61 - RM 860
1.67 - RM 1,060
1.74 - RM 1,710
8. Aether Custom - 7 days
iDrive technology, enhance night vision with coating & lens optics; night myopia
Photochromic
1.56 - RM 1,060 (F)
1.61 - RM 1,360 (F)
1.67 - RM 1,510 (F)
1.74 - RM 2,360 (F)
Blue-Light Filter
1.56 - RM 480
1.61 - RM 580
1.67 - RM 840
1.74 - RM 1,150
UV400
-
-
-
-
5. Pentax - 3 days
From Japan, Premium Spherical, Stable peripheral vision. Slightly thicker.
Photochromic
-
1.61 - RM 730 (F)
-
-
RX
</span>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/2.png" alt="Price List 2" data-tags="premium" onclick="openLightbox(this.src)">
</div>

<div class="sectionlens"><h6>Single Vision 3, Relax Lens</h6>

<span class="search-only">
Blue-Light Filter
1.56 - RM 1,000
1.61 - RM 1,200
1.67 - RM 1,500
1.74 - RM 2,000
UV400
1.56 - RM 850
1.61 - RM 1,050
1.67 - RM 1,350
1.74 - RM 1,850
Ultimate Clear Zone from side to side!
Photochomic
1.56 - RM 1,550 (F)
1.61 - RM 1,750 (F)
1.67 - RM 2,050 (F)
-
RX
9. Pentax Relax - 7 days
Blue-Light Filter
1.56 - RM 930
1.61 - RM 1,080
1.67 - RM 1,430
1.74 - RM 2,180
UV400
1.56 - RM 830
1.61 - RM 980
1.67 - RM 1,330
1.74 - RM 1,980
10. Ultimate Relax - 7 days
From Germany, but their most premium optics
Photochromic
1.56 - RM 1,080
1.61 - RM 1,330 
1.67 - RM 1,830 
1.74 - RM 2,480
Blue-Light Filter
-
1.61 - RM 2,450
1.67 - RM 2,850
-
UV400
1.56 - RM 1,850
1.61 - RM 2,250
1.67 - RM 2,650
-
12. Rodenstock Relax - 7 days
From Germany, top notch lenses, long tradition of optics technology
Photochromic
1.56 - RM 2,650 (F)
1.61 - RM 3,050 (F)
1.67 - RM 3,450 (F)
-
Blue-Light Filter
1.56 - RM 1,400
1.61 - RM 1,500
1.67 - RM 1,900
1.74 - RM 3,050
UV400
1.56 - RM 1,300
1.61 - RM 1,450
1.67 - RM 1,800
1.74 - RM 2,850
11. Meyer Relax - 7 days
From Germany, top notch lenses, long tradition of optics technology
Photochromic
1.56 - RM 1,550
1.61 - RM 1,800 
1.67 - RM 2,300 
1.74 - RM 3,250
</span>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/3.png" alt="Price List 3" data-tags="tinted" onclick="openLightbox(this.src)">
</div>

<div class="sectionlens"><h6>Single Vision 4, Ultra Optics</h6>

<span class="search-only">
Blue-Light Filter
1.50 - RM 1,100
1.61 - RM 1,300
1.67 - RM 1,600
1.74 - RM 2,250
UV400
1.50 - RM 950
1.61 - RM 1,150
1.67 - RM 1,450
1.74 - RM 2,100
Ultimate Clear Zone, super thin and reduce magnification.
Photochomic
1.50 - RM 1,850 (F)
1.61 - RM 2,050 (F)
1.67 - RM 2,350 (F)
-
RX
14. Pentax Double Aspheric - 7 days
Blue-Light Filter
-
1.61 - RM 3,150
1.67 - RM 3,550
-
UV400
1.56 - RM 2,600
1.61 - RM 2,950
1.67 - RM 3,350
1.74 - RM 4,850
15. Rodenstock B.I.G. Norm Custom - 10 days
From Germany, analyse biometric and produce exceptionally sharp vision.
Photochromic
1.56 - RM 3,400 
1.61 - RM 3,750
1.67 - RM 4,150
-
Blue-Light Filter
-
1.61 - RM 1,850
1.67 - RM 2,250
-
UV400
1.56 - RM 1,250
1.61 - RM 1,650
1.67 - RM 2,050
-
13. Rodenstock Custom - 7 days
From Germany, top notch lenses, long tradition of optics technology
Photochromic
1.56 - RM 2,050 (F)
1.61 - RM 2,450 (F)
1.67 - RM 2,850 (F)
-
</span>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/4.png" alt="Price List 4" data-tags="basic" onclick="openLightbox(this.src)">
</div>

<div class="sectionlens"><h6>Sunglasses Lenses</h6>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/5.jpg" alt="Price List 5" data-tags="basic" onclick="openLightbox(this.src)">
</div>

<div class="sectionlens"><h6>Sunglasses Lenses</h6>

  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/6.jpg" alt="Price List 6" data-tags="basic" onclick="openLightbox(this.src)">
</div>

</div>
</div>
</div>

<div style="height:200px"></div>

<div id="lightboxOverlay" onclick="closeLightbox()">
  <img id="lightboxImg" src="">
</div>



<script>
// Open lightbox with the clicked image
function openLightbox(src) {
  const overlay = document.getElementById('lightboxOverlay');
  const img = document.getElementById('lightboxImg');
  img.src = src;
  overlay.style.display = 'flex';
}

// Close lightbox
function closeLightbox() {
  document.getElementById('lightboxOverlay').style.display = 'none';
}
</script>


<script>
const searchInput = document.getElementById("searchInput");
const sections = document.querySelectorAll(".sectionlens");

searchInput.addEventListener("input", () => {
  const terms = searchInput.value
    .toLowerCase()
    .split(/\s+/)
    .filter(Boolean);

  sections.forEach(section => {
    const text = section.textContent.toLowerCase();

    const match = terms.every(term => text.includes(term));
    section.style.display = match ? "block" : "none";
  });
});
</script>






<script>
// Public holidays (Selangor + KL 2025–2026)
const PUBLIC_HOLIDAYS = new Set([
  "2025-01-01","2025-01-29","2025-01-30","2025-02-01","2025-02-03",
  "2025-02-11","2025-03-18","2025-03-31","2025-04-01","2025-05-01",
  "2025-05-12","2025-06-02","2025-06-07","2025-06-27","2025-08-31",
  "2025-09-01","2025-09-05","2025-09-15","2025-09-16","2025-10-20",
  "2025-12-11","2025-12-25","2026-01-01","2026-02-01","2026-02-02",
  "2026-02-17","2026-02-18","2026-03-07","2026-03-21","2026-03-22",
  "2026-03-23","2026-05-01","2026-05-27","2026-05-31","2026-06-01",
  "2026-06-17","2026-08-25","2026-08-31","2026-09-16","2026-11-08",
  "2026-11-09","2026-12-11","2026-12-25"
]);

const DAYS = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];

function getOrdinal(n) {
  let s=["th","st","nd","rd"], v=n%100;
  return n + (s[(v-20)%10]||s[v]||s[0]);
}

function addWorkingDays(date, days) {
  let result = new Date(date);
  while (days > 0) {
    result.setDate(result.getDate() + 1);
    let day = result.getDay();
    let dateStr = result.toISOString().split('T')[0];
    if (day !== 0 && day !== 6 && !PUBLIC_HOLIDAYS.has(dateStr)) {
      days--;
    }
  }
  return result;
}

function formatDateWithDay(d) {
  const months = ["January","February","March","April","May","June",
                  "July","August","September","October","November","December"];
  return `${getOrdinal(d.getDate())} ${months[d.getMonth()]} ${DAYS[d.getDay()]}`;
}

function calculateWorkingDays() {
  let today = new Date();
  let threeDays = addWorkingDays(today, 3);
  let sevenDays = addWorkingDays(today, 7);

  // Express option: 3 working days → 2 working days
  let expressThree = addWorkingDays(today, 2);

  document.getElementById('dateOutput').innerHTML = `
    Today is ${formatDateWithDay(today)}.<br>
    3 Days Completion Estimate : ${formatDateWithDay(threeDays)}.<br>
    7 Days Completion Estimate : ${formatDateWithDay(sevenDays)}.
  `;
}

// Auto-calculate on page load
calculateWorkingDays();
</script>































<script>
document.getElementById("greetBtn").onclick = () => {
  const name = document.getElementById("name").value.trim();
  document.getElementById("msg").value =
    `Greetings ${name} from Kiara Optometry.`;
};

document.getElementById("sendBtn").onclick = () => {
  const phone = document.getElementById("phone").value.replace(/\D/g,'');
  const text = encodeURIComponent(document.getElementById("msg").value);
  if (!phone || !text) return;
  window.open(`https://wa.me/${phone}?text=${text}`, "_blank");
};
</script>

<script>
document.getElementById("recommendBtn").onclick = () => {
  const sph = parseFloat(document.getElementById("sph").value) || 0;
  const cyl = parseFloat(document.getElementById("cyl").value) || 0;
  const total = Math.abs(sph) + Math.abs(cyl);

  // Lens index mapping with min/max thresholds (diopters, exclude 1.50)
  const lensMap = [
    {min: 0.00, max: 4.00, index: "1.56"},
    {min: 4.00, max: 6.00, index: "1.61"},
    {min: 6.00, max: 8.00, index: "1.67"},
    {min: 8.00, max: Infinity, index: "1.74"}
  ];

  // Find recommended index
  let rec = lensMap.find(item => total > item.min && total <= item.max) || lensMap[0];
  let index = rec.index;

  // Determine thin/thick side
  let midpoint = (rec.min + rec.max) / 2;
  let thicknessDesc = total <= midpoint ? "thinner side" : "thicker side";

  document.getElementById("indexResult").textContent =
    `${index} ; RX is on ${thicknessDesc} of this index. RX range ${rec.min.toFixed(2)} to ${rec.max === Infinity ? '∞' : rec.max.toFixed(2)}.`;
};
</script>




<script>
function getNumber(id) {
  let val = parseFloat(document.getElementById(id).value);
  return isNaN(val) ? 0 : val;
}
</script>




<script>
function formatRM(amount) {
  return 'RM ' + Math.round(amount).toLocaleString();
}

function calculateStandardDiscount() {
  let p1 = parseFloat(document.getElementById('priceInput').value) || 0;
  let p2 = parseFloat(document.getElementById('input2').value) || 0;
  let p3 = parseFloat(document.getElementById('input3').value) || 0;

  let price = p1 + p2 + p3;

  if (price <= 0) {
    document.getElementById('output').innerHTML = '<em>Please enter price.</em>';
    return;
  }

let discount = 0;
if (price <= 249) discount = 0;
else if (price <= 299) discount = 10;
else if (price <= 699) discount = 15;
else discount = 20;


  let netPrice = price * (1 - discount / 100);

document.getElementById('output').innerHTML = `
  Original Price : ${formatRM(price)}<br>
  Net Price : ${formatRM(netPrice)}<br>
  ${discount > 0 ? `Description : ${discount}% off until March 2026!<br>` : ``}
`;

}

function calculateNoExamDiscount() {
  let p1 = parseFloat(document.getElementById('priceInput').value) || 0;
  let p2 = parseFloat(document.getElementById('input2').value) || 0;
  let p3 = parseFloat(document.getElementById('input3').value) || 0;

  let price = p1 + p2 + p3;

  if (price <= 0) {
    document.getElementById('output').innerHTML = '<br><em>Please enter price.</em>';
    return;
  }

  let discount = 30;
  let netPrice = price * (1 - discount / 100);
  if (netPrice < 200) netPrice = 200;

  document.getElementById('output').innerHTML = `<br>
    Original Price : ${formatRM(price)}<br>
    No-Eye-Exam Net Price : ${formatRM(netPrice)}<br>
  `;
}

function applyRCode() {
  // Sum all 3 inputs
  let p1 = parseFloat(document.getElementById('priceInput').value) || 0;
  let p2 = parseFloat(document.getElementById('input2').value) || 0;
  let p3 = parseFloat(document.getElementById('input3').value) || 0;
  let price = p1 + p2 + p3;

  if (price <= 0) {
    document.getElementById('output').innerHTML = '<em>Please enter price.</em>';
    return;
  }

  // Base discount logic
  let discount = 0;
  if (price <= 249) discount = 0;
  else if (price <= 299) discount = 10;
  else if (price <= 699) discount = 15;
  else discount = 20;

  // Extra 5% R-Code
  discount += 5;

  let netPrice = price * (1 - discount / 100);

  document.getElementById('output').innerHTML = `
    Original Price : ${formatRM(price)}<br>
    Net Price : ${formatRM(netPrice)}<br>
${discount > 0 ? `Description : ${discount}% off (<span style="color:red; font-weight:bold;">R-Code!</span>)<br>` : ``}
  `;
}

</script>



<script>
document.addEventListener('DOMContentLoaded', () => {
  const data = JSON.parse(localStorage.getItem('summaryData') || '{}');

  // debug: make sure data exists
  console.log('Loaded summaryData:', data);

  Object.keys(data).forEach(id => {
    const span = document.getElementById(id);
    if (span) span.textContent = data[id];
  });
});
</script>



















</body>
</html>
