<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Kiara Optometry Lens Selector</title>
<meta name="viewport" content="width=device-width, initial-scale=0.8" />

<style>
:root{
  --green:#0b3d2e;
  --pale:#ffffe0;
  --off:#f8f8f5;
  --line:#d7d7cf;
  --btn-bg:#0b3d2e;
  --btn-text:#ffffe0;
  --btn-border:#ffffff;
}


html,body{
  background:var(--off);
  color:var(--green);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  font-size:11px;
  margin:0;
}

.wrap{width:90%; max-width:600px; margin:0 auto;}
.section{
  background:var(--pale);
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
  margin:10px 0;
}


/* Container for all lens sections */
.lens-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

/* Each sectionlens box */
.sectionlens {
  background:var(--pale);
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
  margin:10px 0;  
cursor: pointer;
  overflow: hidden;
}

/* Enlarge when clicked */
.sectionlens.enlarged {
  background:var(--pale);
  border:1px solid var(--line);
  border-radius:10px;
  padding:12px;
  margin:10px 0;  
position: relative;
  z-index: 10;
  transform: scale(1);
  grid-column: span 2; /* optionally span both columns */
}

/* Image styling inside sectionlens */
.sectionlens img {
  width: 95%;
  height: auto;
  display: block;
}


label{font-weight:600; margin-top:8px; display:block;}
input, textarea{
  width:100%;
  padding:6px;
  border:1px solid #c9c9c1;
  border-radius:6px;
  box-sizing:border-box;
}

textarea{min-height:40px; resize:vertical;}

button{
  background:var(--btn-bg);
  color:var(--btn-text);
  border:1px solid var(--btn-border);
  padding:6px 14px;
  border-radius:7px;
  font-size:11px;
  cursor:pointer;
}

h2{
  text-align: center;
  margin: 10px 0;
  font-size: 18px;
  color: var(--green);
}
h6{
  font-size:5px;
  margin: 5px;
}

button:hover{filter:brightness(1.05);}
button:active{transform:translateY(1px);}

.row{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-top:8px;
}
/* force all except headings to 11px */
.section *:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6){
  font-size:11px;
}




</style>
</head>

<body>

<div style="height:200px"></div>



  <div class="wrap">

<h2>Kiara Optometry Lens Selector</h2>
<div style="height:20px"></div>

    <div class="section">
      <label>Name </label>
      <input id="name" type="text">

      <label>WhatsApp Number - <i>Enter with country code, e.g. 601170199170</i></label>
      <input id="phone" type="text" style="font-size:10px" placeholder="">

      <label>Notes</label>
      <textarea id="msg"></textarea>

      <div><br>
        <button style="width:150px; margin-left:0%; margin-right:3%" id="greetBtn">Greetings</button>
        <button style="width:150px" id="sendBtn">Send WhatsApp</button>
      </div>
    </div>

<div class="section">
  <div class="prescription-row">
    <h3>What Index Should you Get?</h3>
    <label>Sphere</label>
    <input id="sph" type="text" step="0.25"> 

    <label>Cylinder</label>
    <input id="cyl" type="text" step="0.25">
  </div><br>

  <button id="recommendBtn">Recommended Index</button>
  <p style="margin-left:1%" id="indexResult"></p>

<input type="text" id="searchInput" placeholder="Search images by name or tag">

</div>


  </div>

<div class="wrap">
<div class="lens-container">

<div class="sectionlens"><h6>Single Vision 1, Standard Stock</h6>
  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/1.png" alt="Price List 1" data-tags="basic">
</div>

<div class="sectionlens"><h6>Single Vision 2, Standard Stock & RX</h6>
  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/2.png" alt="Price List 2" data-tags="premium">
</div>

<div class="sectionlens"><h6>Single Vision 3, Relax Lens</h6>
  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/3.png" alt="Price List 3" data-tags="tinted">
</div>

<div class="sectionlens"><h6>Single Vision 4, Ultra Optics</h6>
  <img src="https://raw.githubusercontent.com/kiaraoptometrypx/OL-selector/main/Lens_Catalogue/4.png" alt="Price List 4" data-tags="basic">
</div>



</div>
</div>
</div>






<script>
const searchInput = document.getElementById("searchInput");
const sections = document.querySelectorAll(".sectionlens");

function fuzzyMatch(text, query) {
  text = text.toLowerCase();
  query = query.toLowerCase().trim();
  let tIndex = 0, qIndex = 0;
  while (tIndex < text.length && qIndex < query.length) {
    if (text[tIndex] === query[qIndex]) qIndex++;
    tIndex++;
  }
  return qIndex === query.length; // all query chars matched in order
}

searchInput.addEventListener("input", () => {
  const query = searchInput.value;
  sections.forEach(section => {
    const text = section.textContent;
    section.style.display = fuzzyMatch(text, query) ? "block" : "none";
  });
});
</script>

<script>
const lensSections = document.querySelectorAll(".sectionlens");

lensSections.forEach(section => {
  section.addEventListener("click", () => {
    // If already enlarged, remove class (minimize)
    if (section.classList.contains("enlarged")) {
      section.classList.remove("enlarged");
    } else {
      // Remove enlarged from others
      lensSections.forEach(s => s.classList.remove("enlarged"));
      // Enlarge clicked one
      section.classList.add("enlarged");
    }
  });
});
</script>


































<script>
document.getElementById("greetBtn").onclick = () => {
  const name = document.getElementById("name").value.trim();
  document.getElementById("msg").value =
    `Greetings ${name} from Kiara Optometry.`;
};

document.getElementById("sendBtn").onclick = () => {
  const phone = document.getElementById("phone").value.replace(/\D/g,'');
  const text = encodeURIComponent(document.getElementById("msg").value);
  if (!phone || !text) return;
  window.open(`https://wa.me/${phone}?text=${text}`, "_blank");
};
</script>

<script>
document.getElementById("recommendBtn").onclick = () => {
  const sph = parseFloat(document.getElementById("sph").value) || 0;
  const cyl = parseFloat(document.getElementById("cyl").value) || 0;
  const total = Math.abs(sph) + Math.abs(cyl);

  // Lens index mapping with min/max thresholds (diopters, exclude 1.50)
  const lensMap = [
    {min: 0.00, max: 4.00, index: "1.56"},
    {min: 4.00, max: 6.00, index: "1.61"},
    {min: 6.00, max: 8.00, index: "1.67"},
    {min: 8.00, max: Infinity, index: "1.74"}
  ];

  // Find recommended index
  let rec = lensMap.find(item => total > item.min && total <= item.max) || lensMap[0];
  let index = rec.index;

  // Determine thin/thick side
  let midpoint = (rec.min + rec.max) / 2;
  let thicknessDesc = total <= midpoint ? "thinner side" : "thicker side";

  document.getElementById("indexResult").textContent =
    `${index} ; RX is on ${thicknessDesc} of this index. RX range ${rec.min.toFixed(2)} to ${rec.max === Infinity ? 'âˆž' : rec.max.toFixed(2)}.`;
};
</script>






























</body>
</html>

